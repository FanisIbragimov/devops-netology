**Основная часть**     
    
    
**Задание №1**     
   
Постмортен:   
**Краткое описание инцидента:** 21 октября 2018 г. в 22:52 UTC проводились плановые работы по техническому обслуживанию для замены вышедшего из строя оптического оборудования 100G привели к потере связи между сетевым узлом на Восточном побережье США и основным центром обработки данных на Восточном побережье США. Связь между этими точками была восстановлена за 43 секунды, но это короткое отключение вызвало цепочку событий, которые привели к 24 часам и 11 минутам ухудшения качества обслуживания.    
**Предшествующие события:** В 22:52 UTC 21 октября проводились плановые работы по техническому обслуживанию для замены вышедшего из строя оптического оборудования 100G. Это привело к потере связи между сетевым узлом на Восточном побережье США и основным центром обработки данных на Восточном побережье США. Связь между этими точками была восстановлена за 43 секунды, но это короткое отключение вызвало цепочку событий, которые привели к 24 часам и 11 минутам ухудшения качества обслуживания.   
**Причина инцидента:** кластер баз данных Западного побережья принимал записи приложений в течение почти 40 минут. Кроме того, в кластере Восточного побережья существовало несколько секунд записей, которые не были реплицированы на Западное побережье и препятствовали репликации новых записей обратно на Восточное побережье.    
**Воздействие:**   
**Обнаружение:** В 22:54 UTC внутренние системы мониторинга начали генерировать предупреждения, указывающие на то, что система испытывают многочисленные сбои. В это время несколько инженеров отвечали и работали над сортировкой входящих уведомлений. К 23:02 UTC инженеры из группы быстрого реагирования уже работали над проблемой.   
**Реакция:** Восстановление системы до нормального состояния в том числе уровеня производительности выполнено в 23:03 22 октября (вемя восстановления 24 ч 10 мин).    
**Восстановление:** Произведена синхронизация баз данных между серверами в угоду сохранения данных пользователей. Далее было обеспечение доступности сервера совместно с восстановлением данных и после выполнение полной доступности сервиса.     
Таймлайн:   
2018 October 21 22:52 UTC Orchestrator приступил к организации кластерных топологий баз данных Западного побережья США. Восстановление подключения, перенаправление трафика записи на новые первичные серверы на сайте West Coast.   
2018 October 21 23:07 UTC Заблокировали внутренний инструментарий развертывания, чтобы предотвратить внесение каких-либо дополнительных изменений. В 23:09 UTC группа реагирования присвоила сайту желтый статус. Перевод в активный инцидент и отправка предупреждения координатору инцидентов. Далее перевод в красный статус.   
2018 October 21 23:13 UTC Изучение проблемы для восстановления сервиса     
2018 October 21 23:19 UTC Прекратили выполнение заданий, которые записывают метаданные о таких вещах, как push-запросы. Приостановка доставки webhook и сборку страниц GitHub. Приоритетное внимание целостности данных, а не удобству использования сайта и времени на восстановление.    
2018 October 22 00:05 UTC Инженеры, участвующие в группе реагирования на инциденты, начали разрабатывать план устранения несоответствий данных и внедрения процедур отработки отказа для MySQL. Обновили статус, чтобы сообщить пользователям, что будет выполнятся контролируемый переход на другой ресурс внутренней системы хранения данных.   
2018 October 22 00:41 UTC К этому времени был запущен процесс резервного копирования для всех затронутых кластеров MySQL, и инженеры отслеживали прогресс. Одновременно несколько групп инженеров изучали способы ускорения передачи и восстановления без дальнейшего ухудшения удобства использования сайта или риска повреждения данных.   
2018 October 22 06:51 UTC Несколько кластеров завершили восстановление из резервных копий в центре обработки данных на Восточном побережье США и начали репликацию новых данных с Западного побережья. Другие более крупные кластеры баз данных все еще восстанавливались.     
2018 October 22 11:12 UTC Все праймериз базы данных снова созданы на Восточном побережье США. Существенно повысилась производительность. Распределили нагрузку на чтение по большому пулу реплик чтения.    
2018 October 22 16:24 UTC Были синхронизированы реплики, выполнен переход на исходную топологию, решены проблемы с задержкой / доступностью. Обработка накопившиеся данных.      
2018 October 22 23:03 UTC Все незавершенные сборки webhooks и Pages были обработаны, и целостность и правильная работа всех систем были подтверждены. Статус сайта был изменен на зеленый.    
   
Последующие дествия:   
